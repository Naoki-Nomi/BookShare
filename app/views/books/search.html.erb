<div class="container">
  <div class="row">
    <div>
      <%= link_to "グラフで確認", detail_path(user_id: params[:user_id]) %>
    </div>
  </div>
  <div class="row">
    <%= form_with url: search_books_path, method: :get, local: true do |f| %>
        <%= f.text_field :search %>
        <%= f.select :genre_id, options_from_collection_for_select(@genres, :id, :name), { prompt: "本のジャンル" }, { class: 'form-control text-muted' }%>
        <%= f.date_field :read_from %> ~ <%= f.date_field :read_to %>
        <%= f.submit "検索" %>
      <%= f.hidden_field :user_id, :value => params[:user_id] %>
    <% end %>
  </div>
  <table class="table table-hover">
    <thead>
      <tr>
        <td></td>
        <td>本の著者</td>
        <td>本のタイトル</td>
        <td>本のジャンル</td>
        <td>読み終わった日付</td>
      </tr>
    </thead>
    <tbody>
      <% @books.each do |book| %>
      <tr>
        <td><%= attachment_image_tag book.user, :profile_image, :fill, 70, 60, fallback: "no_image.jpg", size:'150x100', class: 'rounded-circle' %>
            <%= book.user.nickname %>
        </td>
        <td><%= link_to book.author, book_path(book) %></td>
        <td><%= book.book_title %></td>
        <td><%= book.genre.name %></td>
        <td><%= book.read_date %></td>
      </tr>
      <% end %>
    </tbody>
  </table>
</div>